"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const log_symbols_1 = require("log-symbols");
const sisteransi_1 = require("sisteransi");
const exampleFileParser_1 = require("./exampleFileParser");
const output_1 = require("./output");
const prompts_1 = require("./prompts");
async function configureEnv(config) {
    const parsedExample = exampleFileParser_1.parseExampleFile(config.exampleFileContent);
    config.promptStream.write(`Configuring your environment. Please fill out the following info\n`);
    config.promptStream.write(`${log_symbols_1.info} To skip any field press Ctrl+C\n`);
    const answers = await prompts_1.promptForVariables(parsedExample, config.promptStream);
    const output = output_1.createOutput(parsedExample, answers);
    config.promptStream.write(sisteransi_1.erase.lines(parsedExample.variablesToSet.length + 3));
    config.output.write(output, 'utf8');
    config.promptStream.write(`${log_symbols_1.success} Environment has been configured.\n`);
    if (typeof config.output.close === 'function') {
        // we wrote to a file
        config.promptStream.write('File has successfully been created.');
    }
}
exports.configureEnv = configureEnv;
